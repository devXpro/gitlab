# GitLab Configuration
# Copy this file to .env and adjust values as needed

# ===========================================
# GITLAB SERVER SETTINGS
# ===========================================

# Base path for all GitLab data (relative to docker-compose.yml)
GITLAB_HOME=./data/gitlab

# Your GitLab hostname (without protocol)
# This should match your DNS or /etc/hosts entry
# Examples: gitlab.local, git.example.com
GITLAB_HOSTNAME=gitlab.local

# GitLab SSH hostname (for SSH clone URLs)
# IMPORTANT: For Cloudflare setup, use separate subdomain with DNS-only mode (gray cloud)!
# Cloudflare Proxied mode (orange cloud) does NOT support SSH traffic!
# Example: git-ssh.yourdomain.com
# Leave empty to use GITLAB_HOSTNAME
GITLAB_SSH_HOST=

# Container Registry external URL (optional)
# Leave empty to use default: http://GITLAB_HOSTNAME:GITLAB_REGISTRY_PORT
# For Cloudflare setup with separate subdomain: https://registry.example.com
# For local setup: leave empty or use http://gitlab.local:5050
GITLAB_REGISTRY_EXTERNAL_URL=

# Initial root password (min 8 characters)
# After first login, you can change it in the UI
GITLAB_ROOT_PASSWORD=ChangeMe123!

# SSH port shown in GitLab UI for clone URLs
# For production with dedicated SSH subdomain: 22 (standard SSH port, no port in URL)
# For local development: 2222 (to avoid conflicts with host SSH)
GITLAB_SSH_PORT=22

# SSH external port (Docker host port mapping)
# For production: 22 (if you moved server SSH to another port, e.g., 2222)
# For local development: 2222 (to avoid conflicts with host SSH on port 22)
# IMPORTANT: If using port 22, make sure your server SSH is on a different port!
GITLAB_SSH_EXTERNAL_PORT=22

# HTTP port for web interface (nginx will proxy to this)
GITLAB_HTTP_PORT=8080

# Container Registry port (internal)
# For Cloudflare setup: nginx will proxy from port 80 to this port
GITLAB_REGISTRY_PORT=5050

# ===========================================
# GITLAB RUNNER SETTINGS
# ===========================================

# Runner configuration path
RUNNER_CONFIG_PATH=./data/runner/config

# Runner registration token (get from GitLab Admin -> CI/CD -> Runners)
# Leave empty initially, fill after GitLab is running
GITLAB_RUNNER_REGISTRATION_TOKEN=

# Runner description
RUNNER_DESCRIPTION=docker-runner

# Runner tags (comma-separated)
RUNNER_TAGS=docker,linux,arm64

# ===========================================
# RESOURCE LIMITS (optional, uncomment if needed)
# ===========================================

# GITLAB_MEMORY_LIMIT=4g
# GITLAB_CPU_LIMIT=2
# RUNNER_MEMORY_LIMIT=512m
# RUNNER_CPU_LIMIT=1

# ===========================================
# EMAIL / SMTP SETTINGS (MailerSend)
# ===========================================

# SMTP server address (MailerSend)
SMTP_ADDRESS=smtp.mailersend.net

# SMTP port (587 for TLS, 465 for SSL, 25 for plain)
SMTP_PORT=587

# MailerSend SMTP username (usually your MailerSend email or API username)
# Get from: https://app.mailersend.com/domains -> SMTP -> Username
SMTP_USERNAME=your-mailersend-username

# MailerSend SMTP password (API token or SMTP password)
# Get from: https://app.mailersend.com/domains -> SMTP -> Password
SMTP_PASSWORD=your-mailersend-password

# SMTP domain (usually mailersend.net)
SMTP_DOMAIN=mailersend.net

# Email "From" address (must be verified in MailerSend)
# Example: gitlab@yourdomain.com
GITLAB_EMAIL_FROM=gitlab@yourdomain.com

# Email "From" display name
GITLAB_EMAIL_DISPLAY_NAME=GitLab

# Email "Reply-To" address (optional, defaults to GITLAB_EMAIL_FROM)
GITLAB_EMAIL_REPLY_TO=noreply@yourdomain.com

# Email subject suffix (optional, e.g., " | GitLab")
GITLAB_EMAIL_SUBJECT_SUFFIX=

# ===========================================
# TIMEZONE
# ===========================================
# Use UTC for all services (standard practice for servers)
# Client applications will convert to user's local timezone
TZ=UTC

